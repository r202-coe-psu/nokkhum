{% extends '/storages/index.html' %}
{% import '/base/html-renderer.html' as renderer %}
{% block title %}{{camera.name}} Video Storage{% endblock %}

{% block dashboard_title %}
Video Storage: {{camera.name}}
{% endblock %}
{% block additional_head %}
<style>
  .icon-centered {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }
</style>
{% endblock %}
{% block breadcrumbs %}
{{ super() }}
<i class="right angle icon divider"></i>
<a class="section"
  href="{{ url_for('storages.list_records_by_date', processor_id=processor.id, date_dir=video_path.parent.name) }}">{{
  video_path.parent.name }}</a>
{% endblock %}

{% block content %}
<div class="ui container">
  <h3 class="ui header">{{ video_path.name }}</h3>
  <div class="ui center segment">
    <div class="ui special cards">
      <div class="centered card" style="width: 100%;">
        <div class="dimmable image">
          <img
            src="{{ url_for('storages.get_thumbnail', processor_id=processor.id, date_dir=video_path.parent.name, filename='{}-thumbnail.png'.format(video_path.stem.split('.')[0])) }}">
          <div class="icon-centered"><a id="video-player"><i class="huge play icon"></i></a></div>

        </div>
      </div>
    </div>
    {#
    <div class="ui embed " id="video-player"
      data-url="{{ url_for('storages.download', processor_id=processor.id, date_dir=video_path.parent.name, filename=video_path.name) }}"
      data-placeholder="{{ url_for('storages.get_thumbnail', processor_id=processor.id, date_dir=video_path.parent.name, filename='{}-thumbnail.png'.format(video_path.stem.split('.')[0])) }}"
      data-icon="right play circle"></div>
    <div style="margin-top: 1em;">
      <a class="ui primary button"
        href="{{ url_for('storages.download', processor_id=processor.id, date_dir=video_path.parent.name, filename=video_path.name) }}">Download</a>
    </div>
    #}
  </div>
</div>
<script type="text/python">
  from videos import controllers
  video_controller = controllers.VideoController()
  video_controller.start()
</script>
{% endblock %}

{% block additional_js %}
<script type="text/javascript" src="{{ url_for('static', filename='brython/videos.brython.js') }}"></script>

{% endblock %}